name: GitHub Actions Demo

on: [push]
#on: workflow_dispatch

jobs:
  Deploy-Documentation-Site:
    runs-on: ubuntu-latest
    steps:
      - name: Clone the wiki and prepare
        run: |
          git clone https://github.com/RetroAchievements/docs.wiki.git
          cd docs.wiki
          ln -sf Home.md index.md
          echo -e "\n\n\n## Changelog\n\nLast 10 changes on this page:\n" >> Home.md
          git log -n 10 --date=format:"%Y-%m-%d %H:%M" --pretty=format:"- \`[%cd] %cn:\` %s" Home.md >> Home.md
          echo 'docs.retroachievements.org' > CNAME
          cd ..

      - name: Check out repository code
        uses: actions/checkout@v2
      
      - run: echo "ğŸ’¡ The ${{ github.repository }} repository has been cloned to the runner."
      - run: echo "ğŸ–¥ï¸ The workflow is now ready to test your code on the runner."
      - name: List files in the repository
        run: |
          ls
      - run: echo "ğŸ This job's status is ${{ job.status }}."
